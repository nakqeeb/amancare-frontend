<div class="time-slots-container">
  @if (timeSlots.length === 0) {
  <div class="no-slots">
    <mat-icon>event_busy</mat-icon>
    <p>لا توجد أوقات متاحة في هذا اليوم</p>
  </div>
  } @else {
  <div class="slots-grid">
    @for (slot of groupedSlots; track slot.period) {
    <div class="time-period">
      <h5 class="period-title">
        <mat-icon>{{ getPeriodIcon(slot.period) }}</mat-icon>
        {{ slot.period }}
      </h5>
      <div class="slots-row">
        @for (timeSlot of slot.slots; track timeSlot.time) {
        <mat-chip-option
          [selected]="selectedSlot === timeSlot.time"
          [disabled]="!timeSlot.available"
          [attr.aria-label]="getSlotAriaLabel(timeSlot)"
          [matTooltip]="getSlotTooltip(timeSlot)"
          (click)="selectSlot(timeSlot)"
          [class.available]="timeSlot.available"
          [class.booked]="!timeSlot.available"
          [class.selected]="selectedSlot === timeSlot.time"
        >
          <span class="slot-time">{{ formatTime(timeSlot.time) }}</span>
          @if (!timeSlot.available) {
          <mat-icon class="booked-icon">block</mat-icon>
          }
        </mat-chip-option>
        }
      </div>
    </div>
    }
  </div>
  }

  <!-- Legend -->
  <div class="slots-legend">
    <div class="legend-item">
      <span class="legend-color available"></span>
      <span>متاح</span>
    </div>
    <div class="legend-item">
      <span class="legend-color booked"></span>
      <span>محجوز</span>
    </div>
    <div class="legend-item">
      <span class="legend-color selected"></span>
      <span>محدد</span>
    </div>
  </div>
</div>
