<app-header></app-header>
<app-sidebar>
  <div class="settings-container">
    <div class="page-header">
      <button mat-icon-button routerLink="/profile/overview">
        <mat-icon>arrow_forward</mat-icon>
      </button>
      <h1>ุงูุฅุนุฏุงุฏุงุช</h1>
    </div>

    <mat-accordion multi="true">
      <!-- Appearance Settings -->
      <mat-expansion-panel expanded>
        <mat-expansion-panel-header>
          <mat-panel-title>
            <mat-icon>palette</mat-icon>
            ุงููุธูุฑ
          </mat-panel-title>
          <mat-panel-description> ุชุฎุตูุต ูุธูุฑ ุงูุชุทุจูู </mat-panel-description>
        </mat-expansion-panel-header>

        <form [formGroup]="appearanceForm">
          <div class="settings-section">
            <div class="setting-item">
              <div class="setting-info">
                <h3>ุงูุณูุฉ</h3>
                <p>ุงุฎุชุฑ ุณูุฉ ุงูุชุทุจูู ุงูููุถูุฉ</p>
              </div>
              <mat-radio-group formControlName="theme" (change)="updateTheme()">
                <mat-radio-button value="light">
                  <mat-icon>light_mode</mat-icon>
                  ูุงุชุญ
                </mat-radio-button>
                <mat-radio-button value="dark">
                  <mat-icon>dark_mode</mat-icon>
                  ุฏุงูู
                </mat-radio-button>
                <mat-radio-button value="auto">
                  <mat-icon>brightness_auto</mat-icon>
                  ุชููุงุฆู
                </mat-radio-button>
              </mat-radio-group>
            </div>

            <mat-divider></mat-divider>

            <div class="setting-item">
              <div class="setting-info">
                <h3>ุงููุบุฉ</h3>
                <p>ุงุฎุชุฑ ูุบุฉ ูุงุฌูุฉ ุงูุชุทุจูู</p>
              </div>
              <mat-form-field>
                <mat-select
                  formControlName="language"
                  (selectionChange)="updateLanguage()"
                >
                  <mat-option value="ar">
                    <span class="flag">๐ธ๐ฆ</span>
                    ุงูุนุฑุจูุฉ
                  </mat-option>
                  <mat-option value="en">
                    <span class="flag">๐ฌ๐ง</span>
                    English
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <mat-divider></mat-divider>

            <div class="setting-item">
              <div class="setting-info">
                <h3>ุญุฌู ุงูุฎุท</h3>
                <p>ุชุนุฏูู ุญุฌู ุงููุต ูู ุงูุชุทุจูู</p>
              </div>
              <mat-radio-group formControlName="fontSize">
                <mat-radio-button value="small">ุตุบูุฑ</mat-radio-button>
                <mat-radio-button value="medium">ูุชูุณุท</mat-radio-button>
                <mat-radio-button value="large">ูุจูุฑ</mat-radio-button>
              </mat-radio-group>
            </div>
          </div>
        </form>
      </mat-expansion-panel>

      <!-- Regional Settings -->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            <mat-icon>public</mat-icon>
            ุงูุฅุนุฏุงุฏุงุช ุงูุฅูููููุฉ
          </mat-panel-title>
          <mat-panel-description>
            ุงูููุทูุฉ ุงูุฒูููุฉ ูุชูุณููุงุช ุงูุชุงุฑูุฎ
          </mat-panel-description>
        </mat-expansion-panel-header>

        <form [formGroup]="regionalForm">
          <div class="settings-section">
            <div class="setting-item">
              <div class="setting-info">
                <h3>ุงูููุทูุฉ ุงูุฒูููุฉ</h3>
                <p>ุงุฎุชุฑ ููุทูุชู ุงูุฒูููุฉ</p>
              </div>
              <mat-form-field>
                <mat-select formControlName="timezone">
                  <mat-option value="Asia/Riyadh">ุงูุฑูุงุถ (GMT+3)</mat-option>
                  <mat-option value="Asia/Dubai">ุฏุจู (GMT+4)</mat-option>
                  <mat-option value="Asia/Kuwait">ุงููููุช (GMT+3)</mat-option>
                  <mat-option value="Africa/Cairo">ุงููุงูุฑุฉ (GMT+2)</mat-option>
                  <mat-option value="Asia/Beirut">ุจูุฑูุช (GMT+2)</mat-option>
                  <mat-option value="Asia/Amman">ุนูุงู (GMT+2)</mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <mat-divider></mat-divider>

            <div class="setting-item">
              <div class="setting-info">
                <h3>ุชูุณูู ุงูุชุงุฑูุฎ</h3>
                <p>ุงุฎุชุฑ ุทุฑููุฉ ุนุฑุถ ุงูุชุงุฑูุฎ</p>
              </div>
              <mat-form-field>
                <mat-select formControlName="dateFormat">
                  <mat-option value="DD/MM/YYYY">31/12/2024</mat-option>
                  <mat-option value="MM/DD/YYYY">12/31/2024</mat-option>
                  <mat-option value="YYYY-MM-DD">2024-12-31</mat-option>
                  <mat-option value="DD-MM-YYYY">31-12-2024</mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <mat-divider></mat-divider>

            <div class="setting-item">
              <div class="setting-info">
                <h3>ุชูุณูู ุงูููุช</h3>
                <p>12 ุณุงุนุฉ ุฃู 24 ุณุงุนุฉ</p>
              </div>
              <mat-radio-group formControlName="timeFormat">
                <mat-radio-button value="12h">
                  12 ุณุงุนุฉ (2:30 ู)
                </mat-radio-button>
                <mat-radio-button value="24h">
                  24 ุณุงุนุฉ (14:30)
                </mat-radio-button>
              </mat-radio-group>
            </div>

            <mat-divider></mat-divider>

            <div class="setting-item">
              <div class="setting-info">
                <h3>ุฃูู ููู ูู ุงูุฃุณุจูุน</h3>
                <p>ุงุฎุชุฑ ุจุฏุงูุฉ ุงูุฃุณุจูุน ูู ุงูุชูููู</p>
              </div>
              <mat-radio-group formControlName="firstDayOfWeek">
                <mat-radio-button value="6">ุงูุณุจุช</mat-radio-button>
                <mat-radio-button value="0">ุงูุฃุญุฏ</mat-radio-button>
                <mat-radio-button value="1">ุงูุฅุซููู</mat-radio-button>
              </mat-radio-group>
            </div>

            <mat-divider></mat-divider>

            <div class="setting-item">
              <div class="setting-info">
                <h3>ุงูุนููุฉ</h3>
                <p>ุงูุนููุฉ ุงูุงูุชุฑุงุถูุฉ ููููุงุชูุฑ</p>
              </div>
              <mat-form-field>
                <mat-select formControlName="currency">
                  <mat-option value="SAR">ุฑูุงู ุณุนูุฏู (SAR)</mat-option>
                  <mat-option value="AED">ุฏุฑูู ุฅูุงุฑุงุชู (AED)</mat-option>
                  <mat-option value="KWD">ุฏููุงุฑ ูููุชู (KWD)</mat-option>
                  <mat-option value="QAR">ุฑูุงู ูุทุฑู (QAR)</mat-option>
                  <mat-option value="BHD">ุฏููุงุฑ ุจุญุฑููู (BHD)</mat-option>
                  <mat-option value="OMR">ุฑูุงู ุนูุงูู (OMR)</mat-option>
                  <mat-option value="EGP">ุฌููู ูุตุฑู (EGP)</mat-option>
                  <mat-option value="JOD">ุฏููุงุฑ ุฃุฑุฏูู (JOD)</mat-option>
                  <mat-option value="LBP">ููุฑุฉ ูุจูุงููุฉ (LBP)</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </form>
      </mat-expansion-panel>

      <!-- Dashboard Settings -->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            <mat-icon>dashboard</mat-icon>
            ููุญุฉ ุงูุชุญูู
          </mat-panel-title>
          <mat-panel-description> ุชุฎุตูุต ููุญุฉ ุงูุชุญูู </mat-panel-description>
        </mat-expansion-panel-header>

        <form [formGroup]="dashboardForm">
          <div class="settings-section">
            <div class="setting-item">
              <div class="setting-info">
                <h3>ุชุฎุทูุท ููุญุฉ ุงูุชุญูู</h3>
                <p>ุงุฎุชุฑ ุทุฑููุฉ ุนุฑุถ ููุญุฉ ุงูุชุญูู</p>
              </div>
              <mat-radio-group formControlName="dashboardLayout">
                <mat-radio-button value="compact">ูุถุบูุท</mat-radio-button>
                <mat-radio-button value="expanded">ููุณุน</mat-radio-button>
                <mat-radio-button value="custom">ูุฎุตุต</mat-radio-button>
              </mat-radio-group>
            </div>

            <mat-divider></mat-divider>

            <div class="setting-item">
              <div class="setting-info">
                <h3>ุงูุตูุญุฉ ุงูุงูุชุฑุงุถูุฉ</h3>
                <p>ุงูุตูุญุฉ ุงูุชู ุชุธูุฑ ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู</p>
              </div>
              <mat-form-field>
                <mat-select formControlName="defaultLandingPage">
                  <mat-option value="/dashboard">ููุญุฉ ุงูุชุญูู</mat-option>
                  <mat-option value="/appointments">ุงูููุงุนูุฏ</mat-option>
                  <mat-option value="/patients">ุงููุฑุถู</mat-option>
                  <mat-option value="/profile">ุงูููู ุงูุดุฎุตู</mat-option>
                </mat-select>
              </mat-form-field>
            </div>

            <mat-divider></mat-divider>

            <div class="setting-item">
              <div class="setting-info">
                <h3>ุงููุญุฏุงุช ุงูููุถูุฉ</h3>
                <p>ุงููุญุฏุงุช ุงูุชู ุชุธูุฑ ูู ุงููุตูู ุงูุณุฑูุน</p>
              </div>
              <div class="favorite-modules">
                @for (module of availableModules; track module.id) {
                <mat-chip
                  [selected]="isModuleFavorite(module.id)"
                  (click)="toggleFavoriteModule(module.id)"
                >
                  <mat-icon>{{ module.icon }}</mat-icon>
                  {{ module.name }}
                </mat-chip>
                }
              </div>
            </div>
          </div>
        </form>
      </mat-expansion-panel>

      <!-- Privacy Settings -->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            <mat-icon>security</mat-icon>
            ุงูุฎุตูุตูุฉ
          </mat-panel-title>
          <mat-panel-description>
            ุฅุนุฏุงุฏุงุช ุงูุฎุตูุตูุฉ ูุงูุธููุฑ
          </mat-panel-description>
        </mat-expansion-panel-header>

        <form [formGroup]="privacyForm">
          <div class="settings-section">
            <div class="setting-item">
              <div class="setting-info">
                <h3>ุธููุฑ ุงูููู ุงูุดุฎุตู</h3>
                <p>ูู ููููู ุฑุคูุฉ ูููู ุงูุดุฎุตู</p>
              </div>
              <mat-radio-group formControlName="profileVisibility">
                <mat-radio-button value="public">ุงูุฌููุน</mat-radio-button>
                <mat-radio-button value="clinic">ุงูุนูุงุฏุฉ ููุท</mat-radio-button>
                <mat-radio-button value="private">ุฎุงุต</mat-radio-button>
              </mat-radio-group>
            </div>

            <mat-divider></mat-divider>

            <div class="setting-item">
              <div class="setting-info">
                <h3>ุญุงูุฉ ุงูุงุชุตุงู</h3>
                <p>ุฅุธูุงุฑ ุญุงูุฉ ุงูุงุชุตุงู ููุขุฎุฑูู</p>
              </div>
              <mat-slide-toggle formControlName="showOnlineStatus">
                {{
                  privacyForm.get("showOnlineStatus")?.value ? "ููุนู" : "ูุนุทู"
                }}
              </mat-slide-toggle>
            </div>

            <mat-divider></mat-divider>

            <div class="setting-item">
              <div class="setting-info">
                <h3>ุงุณุชูุจุงู ุงูุฑุณุงุฆู</h3>
                <p>ุงูุณูุงุญ ููุขุฎุฑูู ุจุฅุฑุณุงู ุฑุณุงุฆู</p>
              </div>
              <mat-slide-toggle formControlName="allowMessages">
                {{ privacyForm.get("allowMessages")?.value ? "ููุนู" : "ูุนุทู" }}
              </mat-slide-toggle>
            </div>

            <mat-divider></mat-divider>

            <div class="setting-item">
              <div class="setting-info">
                <h3>ูุดุงุฑูุฉ ุงููุดุงุท</h3>
                <p>ุงูุณูุงุญ ุจูุดุงุฑูุฉ ุญุงูุฉ ุงููุดุงุท</p>
              </div>
              <mat-slide-toggle formControlName="shareActivityStatus">
                {{
                  privacyForm.get("shareActivityStatus")?.value
                    ? "ููุนู"
                    : "ูุนุทู"
                }}
              </mat-slide-toggle>
            </div>
          </div>
        </form>
      </mat-expansion-panel>

      <!-- Accessibility Settings -->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            <mat-icon>accessibility</mat-icon>
            ุฅููุงููุฉ ุงููุตูู
          </mat-panel-title>
          <mat-panel-description>
            ุฅุนุฏุงุฏุงุช ูุชุณููู ุงูุงุณุชุฎุฏุงู
          </mat-panel-description>
        </mat-expansion-panel-header>

        <form [formGroup]="accessibilityForm">
          <div class="settings-section">
            <div class="setting-item">
              <div class="setting-info">
                <h3>ุงูุชุจุงูู ุงูุนุงูู</h3>
                <p>ุฒูุงุฏุฉ ุชุจุงูู ุงูุฃููุงู ูุณูููุฉ ุงููุฑุงุกุฉ</p>
              </div>
              <mat-slide-toggle formControlName="highContrast">
                {{
                  accessibilityForm.get("highContrast")?.value ? "ููุนู" : "ูุนุทู"
                }}
              </mat-slide-toggle>
            </div>

            <mat-divider></mat-divider>

            <div class="setting-item">
              <div class="setting-info">
                <h3>ุชูููู ุงูุญุฑูุฉ</h3>
                <p>ุชูููู ุงูุญุฑูุงุช ูุงูุงูุชูุงูุงุช</p>
              </div>
              <mat-slide-toggle formControlName="reduceMotion">
                {{
                  accessibilityForm.get("reduceMotion")?.value ? "ููุนู" : "ูุนุทู"
                }}
              </mat-slide-toggle>
            </div>

            <mat-divider></mat-divider>

            <div class="setting-item">
              <div class="setting-info">
                <h3>ูุถุน ูุงุฑุฆ ุงูุดุงุดุฉ</h3>
                <p>ุชุญุณููุงุช ููุงุฑุฆุงุช ุงูุดุงุดุฉ</p>
              </div>
              <mat-slide-toggle formControlName="screenReaderMode">
                {{
                  accessibilityForm.get("screenReaderMode")?.value
                    ? "ููุนู"
                    : "ูุนุทู"
                }}
              </mat-slide-toggle>
            </div>

            <mat-divider></mat-divider>

            <div class="setting-item">
              <div class="setting-info">
                <h3>ุงุฎุชุตุงุฑุงุช ููุญุฉ ุงูููุงุชูุญ</h3>
                <p>ุชูุนูู ุงุฎุชุตุงุฑุงุช ููุญุฉ ุงูููุงุชูุญ</p>
              </div>
              <mat-slide-toggle formControlName="keyboardShortcuts">
                {{
                  accessibilityForm.get("keyboardShortcuts")?.value
                    ? "ููุนู"
                    : "ูุนุทู"
                }}
              </mat-slide-toggle>
            </div>
          </div>
        </form>
      </mat-expansion-panel>
    </mat-accordion>

    <!-- Save Button -->
    <div class="save-section">
      <button
        mat-raised-button
        color="primary"
        (click)="saveAllSettings()"
        [disabled]="loading()"
      >
        @if (loading()) {
        <mat-spinner diameter="20"></mat-spinner>
        } @else {
        <mat-icon>save</mat-icon>
        } ุญูุธ ุฌููุน ุงูุฅุนุฏุงุฏุงุช
      </button>
      <button mat-button routerLink="/profile/overview">ุฅูุบุงุก</button>
    </div>
  </div>
</app-sidebar>
