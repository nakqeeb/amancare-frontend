<div class="auth-container">
  <div class="auth-background">
    <div class="background-shapes">
      <div class="shape shape-1"></div>
      <div class="shape shape-2"></div>
    </div>
  </div>

  <div class="auth-content">
    <!-- Header -->
    <div class="auth-header">
      <mat-icon class="app-logo">lock_reset</mat-icon>
      <h1>إعادة تعيين كلمة المرور</h1>
      <p>أدخل بريدك الإلكتروني لإرسال رابط إعادة التعيين</p>
    </div>

    <!-- Form -->
    <mat-card class="auth-card">
      <mat-card-content>
        <form
          [formGroup]="forgotForm"
          (ngSubmit)="onSubmit()"
          *ngIf="!emailSent()"
        >
          <h2 class="form-title">نسيت كلمة المرور</h2>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>البريد الإلكتروني</mat-label>
            <input
              matInput
              type="email"
              formControlName="email"
              placeholder="أدخل بريدك الإلكتروني"
              autocomplete="email"
            />
            <mat-icon matSuffix>email</mat-icon>
            <mat-error *ngIf="forgotForm.get('email')?.hasError('required')">
              البريد الإلكتروني مطلوب
            </mat-error>
            <mat-error *ngIf="forgotForm.get('email')?.hasError('email')">
              البريد الإلكتروني غير صحيح
            </mat-error>
          </mat-form-field>

          <button
            mat-raised-button
            color="primary"
            type="submit"
            class="submit-button"
            [disabled]="forgotForm.invalid || isLoading()"
          >
            <mat-spinner diameter="20" *ngIf="isLoading()"></mat-spinner>
            <span *ngIf="!isLoading()">
              <mat-icon>send</mat-icon>
              إرسال رابط الإعادة
            </span>
            <span *ngIf="isLoading()">جاري الإرسال...</span>
          </button>

          <div class="form-footer">
            <a routerLink="/auth/login" class="back-link">
              <mat-icon>arrow_back</mat-icon>
              العودة لتسجيل الدخول
            </a>
          </div>
        </form>

        <!-- Success Message -->
        <div class="success-message" *ngIf="emailSent()">
          <mat-icon class="success-icon">mark_email_read</mat-icon>
          <h3>تم إرسال البريد الإلكتروني</h3>
          <p>تم إرسال رابط إعادة تعيين كلمة المرور إلى بريدك الإلكتروني.</p>
          <p class="note">
            يرجى التحقق من صندوق البريد الوارد وصندوق الرسائل المزعجة.
          </p>

          <div class="success-actions">
            <button mat-raised-button color="primary" routerLink="/auth/login">
              العودة لتسجيل الدخول
            </button>
            <button mat-button (click)="resendEmail()">إعادة الإرسال</button>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
