<mat-card class="vital-signs-card">
  <mat-card-header>
    <mat-card-title>
      <mat-icon>favorite</mat-icon>
      العلامات الحيوية
    </mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="vitalSignsForm" class="vital-signs-form">
      <div class="form-grid">
        <!-- Temperature -->
        <div class="vital-item">
          <mat-form-field appearance="outline">
            <mat-label>درجة الحرارة</mat-label>
            <input
              matInput
              type="number"
              formControlName="temperature"
              placeholder="37.0"
              step="0.1"
              min="35"
              max="42"
            />
            <span matSuffix>°C</span>
            <mat-icon matPrefix>thermostat</mat-icon>
            <mat-hint>المعدل الطبيعي: 36.5 - 37.5</mat-hint>
          </mat-form-field>
        </div>

        <!-- Blood Pressure -->
        <div class="vital-item bp-item">
          <label class="bp-label">ضغط الدم</label>
          <div class="bp-inputs">
            <mat-form-field appearance="outline">
              <mat-label>الانقباضي</mat-label>
              <input
                matInput
                type="number"
                formControlName="bloodPressureSystolic"
                placeholder="120"
                min="70"
                max="250"
              />
              <span matSuffix>mmHg</span>
            </mat-form-field>
            <span class="bp-separator">/</span>
            <mat-form-field appearance="outline">
              <mat-label>الانبساطي</mat-label>
              <input
                matInput
                type="number"
                formControlName="bloodPressureDiastolic"
                placeholder="80"
                min="40"
                max="150"
              />
              <span matSuffix>mmHg</span>
            </mat-form-field>
          </div>
          <mat-hint class="bp-hint">المعدل الطبيعي: 120/80</mat-hint>
        </div>

        <!-- Heart Rate -->
        <div class="vital-item">
          <mat-form-field appearance="outline">
            <mat-label>معدل النبض</mat-label>
            <input
              matInput
              type="number"
              formControlName="heartRate"
              placeholder="75"
              min="40"
              max="200"
            />
            <span matSuffix>نبضة/دقيقة</span>
            <mat-icon matPrefix>favorite_border</mat-icon>
            <mat-hint>المعدل الطبيعي: 60 - 100</mat-hint>
          </mat-form-field>
        </div>

        <!-- Respiratory Rate -->
        <div class="vital-item">
          <mat-form-field appearance="outline">
            <mat-label>معدل التنفس</mat-label>
            <input
              matInput
              type="number"
              formControlName="respiratoryRate"
              placeholder="16"
              min="8"
              max="60"
            />
            <span matSuffix>نفس/دقيقة</span>
            <mat-icon matPrefix>air</mat-icon>
            <mat-hint>المعدل الطبيعي: 12 - 20</mat-hint>
          </mat-form-field>
        </div>

        <!-- Oxygen Saturation -->
        <div class="vital-item">
          <mat-form-field appearance="outline">
            <mat-label>تشبع الأكسجين</mat-label>
            <input
              matInput
              type="number"
              formControlName="oxygenSaturation"
              placeholder="98"
              min="70"
              max="100"
            />
            <span matSuffix>%</span>
            <mat-icon matPrefix>bubble_chart</mat-icon>
            <mat-hint>المعدل الطبيعي: 95 - 100</mat-hint>
          </mat-form-field>
        </div>

        <!-- Weight -->
        <div class="vital-item">
          <mat-form-field appearance="outline">
            <mat-label>الوزن</mat-label>
            <input
              matInput
              type="number"
              formControlName="weight"
              placeholder="70"
              min="1"
              max="300"
              (blur)="calculateBMI()"
            />
            <span matSuffix>كجم</span>
            <mat-icon matPrefix>fitness_center</mat-icon>
          </mat-form-field>
        </div>

        <!-- Height -->
        <div class="vital-item">
          <mat-form-field appearance="outline">
            <mat-label>الطول</mat-label>
            <input
              matInput
              type="number"
              formControlName="height"
              placeholder="170"
              min="50"
              max="250"
              (blur)="calculateBMI()"
            />
            <span matSuffix>سم</span>
            <mat-icon matPrefix>straighten</mat-icon>
          </mat-form-field>
        </div>

        <!-- BMI -->
        <div class="vital-item">
          <mat-form-field appearance="outline">
            <mat-label>مؤشر كتلة الجسم</mat-label>
            <input
              matInput
              formControlName="bmi"
              readonly
              [value]="bmiValue"
              [class.normal]="bmiCategory === 'normal'"
              [class.warning]="bmiCategory === 'warning'"
              [class.danger]="bmiCategory === 'danger'"
            />
            <mat-icon matPrefix>assessment</mat-icon>
            <mat-hint>{{ bmiMessage }}</mat-hint>
          </mat-form-field>
        </div>

        <!-- Blood Sugar -->
        <div class="vital-item">
          <mat-form-field appearance="outline">
            <mat-label>سكر الدم</mat-label>
            <input
              matInput
              type="number"
              formControlName="bloodSugar"
              placeholder="100"
              min="30"
              max="600"
            />
            <span matSuffix>mg/dL</span>
            <mat-icon matPrefix>opacity</mat-icon>
            <mat-hint>الصائم: 70-100 | العشوائي: &lt;200</mat-hint>
          </mat-form-field>
        </div>

        <!-- Pain Scale -->
        <div class="vital-item pain-scale">
          <label>مقياس الألم</label>
          <div class="pain-slider">
            <mat-slider
              min="0"
              max="10"
              step="1"
              showTickMarks
              discrete
              [displayWith]="formatPainLabel"
            >
              <input matSliderThumb formControlName="painScale" />
            </mat-slider>
            <div class="pain-labels">
              <span>0</span>
              <span>{{ getPainDescription() }}</span>
              <span>10</span>
            </div>
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button mat-stroked-button type="button" (click)="onReset()">
          <mat-icon>refresh</mat-icon>
          إعادة تعيين
        </button>
        <button
          mat-raised-button
          color="primary"
          type="button"
          (click)="onSave()"
          [disabled]="vitalSignsForm.invalid"
        >
          <mat-icon>save</mat-icon>
          حفظ العلامات الحيوية
        </button>
      </div>
    </form>
  </mat-card-content>
</mat-card>
